<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,500,0,0" />
    <title>To Do List</title>
</head>

<body>
    <main>
        <div id="container">
            <h1>To Do List <span class="material-symbols-outlined head"
                    style="transform: scale(2); transform-origin: 50% 56%;">
                    done
                </span></h1>
            <form>
                <input type="text" autocomplete="on" id="text-input">
                <button type="button" class="btn adding">Add</button>
                <button type="button" class="btn deleting">Delete</button>
                <button class="btn refreshing">Refresh</button>
            </form>
            <div class="tasklist">
                <div class="h2-border">
                    <span class="border before"></span>
                    <h2>task</h2>
                    <span class="border after"></span>
                </div>
                <ul id="list-item">
                </ul>
            </div>
        </div>
        <!-- <div id="finished-task">
            <h3>done</h3>
            <ul id="finished-list">
            </ul>
        </div> -->
    </main>
    <script>
        "use strict";
        const $input = document.getElementById('text-input');
        const $addBtn = document.getElementsByClassName('btn adding')[0];
        const $deleteBtn = document.getElementsByClassName('btn deleting')[0];
        const $listItem = document.getElementById('list-item');

        $addBtn.addEventListener('click', () => {
            if ($input.value !== "") {
                const newElement = document.createElement('li');
                // newElement.innerHTML = "running";
                newElement.innerHTML = $input.value;
                $listItem.appendChild(newElement);
                $input.value = "";

                const newItem = document.getElementsByTagName('li')
                const checkIcon = document.createElement('span');
                checkIcon.innerHTML = 'done'
                checkIcon.classList.add('material-symbols-outlined', 'done')

                const remIcon = document.createElement('span');
                remIcon.innerHTML = 'delete'
                remIcon.classList.add('material-symbols-outlined', 'delete')

                for (let i = 0; i < newItem.length; i++) {
                    newItem[i].appendChild(checkIcon);
                    newItem[i].appendChild(remIcon);
                }
                const checkBtn = document.getElementsByClassName('done');
                for (let i = 0; i < checkBtn.length; i++) {
                    checkBtn[i].addEventListener('click', () => {
                        newItem[i].classList.add('checked')
                    })
                }
                const remBtn = document.getElementsByClassName('delete');
                for (let i = 0; i < remBtn.length; i++) {
                    remBtn[i].addEventListener('click', () => {
                        newItem[i].classList.add('remove')
                    })
                }
            } else {
                alert('何も入力されていません。')
            }
        })

        $deleteBtn.addEventListener('click', () => {
            $input.value = '';
        })

    </script>
</body>

</html>